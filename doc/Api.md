Описание API
=======================================

1\. Управление учетной записью
---------------------------------------

### 1.1. Регистрация учетной записи

*Добавлено в версии 0.1*

*Обновлено в версии 0.2*

###### Список изменений
+ 0.2 - возможность добавить контактную информацию

###### Вызов
POST <http://med.dev87.loc/api/signup>

###### Обязательные атрибуты запроса

- **username** - название учетной записи
- **password** - пароль в текстовом виде

###### Необязательные атрибуты запроса

- **name** - имя пользователя
- **midname** - отчество пользователя
- **surname** - фамилия пользователя
- **birth** - дата рождения в формате (`ЧЧ.ММ.ГГГГ` либо `YYYY-MM-DD`)
- **contacts** - список контаков пользователя
    - **email**
    - **phone**
    - **skype**

###### Пример запроса

    data={"username":"Vasya_Pupkin","password":"12345","name":"Василий","midname":"Иванович","surname":"Пупкин","birth":"25.11.1999","contacts":{"email":"vasya@pupkin.ru","phone":"89870123456","skype":"vasya_pupkin"}

###### Пример результата

    {
        "status":"OK"
    }
    
###### ![][notice24] Важно
> Каждый запрос возвращает состояние выполнения. Поэтому результат будет содержать атрибут **status** со значением `OK` при удачном выполнении запроса, либо атрибут **error** с указанием на ошибку.

### 1.2. Авторизация на сервере

*Добавлено в версии 0.2*

###### Вызов

POST <http://med.dev87.loc/api/login>

###### Обязательные атрибуты запроса

- **username** - название учетной записи

> В качестве пароля указывается только один из двух следующих атрибутов: 
- **password** - md5-версия пароля `//TODO реализовать`
- **rawpasswod** - текстовая версия пароля

###### Пример запроса

    username=Vasya_Pupkin&password=12345

###### Пример результата

    {
        "userhash": "7b7f3c605f99f68af970da3122d32eea319c0470828a059b7e",
        "timelive": "2016-12-05T08:09:48+00:00",
        "status": "OK"
    }
    
- **userhash** - хеш-строка входа, используется для вызова методов, требующих авторизацию на сервере
- **timelive** - время окончания работы авторизации
    
###### ![][notice24] Важно
> Значение **userhash** используется для всех последующих запросов и должно обязательно быть указано в строке метода. Например:
> `http://med.dev87.loc/api/loginfo?userhash=<userhash>`

### 1.3. Получение информации об авторизации

*Добавлено в версии 0.2*

###### Вызов

GET <http://med.dev87.loc/api/loginfo>

###### Пример результата

    {
        "timelive": "2016-12-05T08:09:48+00:00",
        "status": "OK"
    }
    
- **timelive** - время окончания работы авторизации

### 1.4. Выход

*Добавлено в версии 0.2*

###### Вызов

GET <http://med.dev87.loc/api/logout>

###### Пример результата

    {
        "status": "OK"
    }

2\. Управление задачами
---------------------------------------

### 2.1. Создание новой задачи

*Добавлено в версии 0.2*

###### Вызов

POST <http://med.dev87.loc/api/task.add>

###### Пример запроса

    data={"name":"Строительство моста К-5","begin":"2016-01-01","end":"2017-12-31","expense":"200000000"}
    
###### Обязательные атрибуты запроса

- **name** - название задачи
- **begin** - плановая дата начала (`ЧЧ.ММ.ГГГГ` либо `YYYY-MM-DD`)
- **end** - плановая дата окончания (`ЧЧ.ММ.ГГГГ` либо `YYYY-MM-DD`)
- **expense** - плановый бюджет

###### Необязательные атриюуты запроса

- **parent** - номер родительской задачи, требуется для создания подзадачи

###### Пример результата

    
    
    

[notice24]: notice24.png
[notice64]: notice64.png
[notice128]: notice128.png